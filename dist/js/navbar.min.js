document.addEventListener("DOMContentLoaded",(function(){const e=document.querySelector(".menu-container"),t=e.querySelector(".menu-button"),n=e.querySelector("#site-header-menu"),s=e.querySelector("#site-navigation");t&&(t.setAttribute("aria-expanded","false"),t.addEventListener("click",(function(){this.classList.toggle("toggled-on"),n.classList.toggle("toggled-on");const e="true"===this.getAttribute("aria-expanded")?"false":"true";this.setAttribute("aria-expanded",e),s.setAttribute("aria-expanded",e)})));document.querySelectorAll(".main-navigation .menu-item-has-children > a").forEach((function(e){const t=e.textContent,n=document.createElement("button");n.className="dropdown-toggle",n.setAttribute("aria-expanded","false"),n.setAttribute("aria-label",t+" submenu"),e.insertAdjacentElement("afterend",n),n.addEventListener("click",(function(){"true"===this.getAttribute("aria-expanded")?this.setAttribute("aria-expanded","false"):this.setAttribute("aria-expanded","true")}))}));n.querySelectorAll(".dropdown-toggle").forEach((function(e){e.addEventListener("click",(function(e){e.preventDefault(),e.stopPropagation(),this.classList.toggle("toggled-on");const t=this.nextElementSibling;t&&t.classList.contains("sub-menu")&&t.classList.toggle("toggled-on");const n="false"===this.getAttribute("aria-expanded")?"true":"false";this.setAttribute("aria-expanded",n);Array.from(this.parentElement.parentElement.children).map((e=>e.querySelector(".dropdown-toggle"))).filter((e=>null!==e&&e!==this)).forEach((e=>{e.classList.remove("toggled-on");const t=e.nextElementSibling;t&&t.classList.contains("sub-menu")&&t.classList.remove("toggled-on"),e.setAttribute("aria-expanded","false")}))}))}));document.querySelectorAll(".sub-menu .menu-item-has-children").forEach((function(e){e.parentElement.classList.add("has-sub-menu")}));document.querySelectorAll(".menu-item a, button.dropdown-toggle").forEach((function(e){e.addEventListener("keydown",(function(e){const n=e.keyCode;if([27,37,38,39,40].includes(n))switch(n){case 27:e.preventDefault(),e.stopPropagation();const n=this.closest("ul").previousElementSibling;n&&n.classList.contains("dropdown-toggle")&&n.classList.contains("toggled-on")?(n.focus(),n.click()):n||t&&t.classList.contains("toggled-on")&&(t.click(),t.focus());break;case 37:if(e.preventDefault(),this.classList.contains("dropdown-toggle"))this.previousElementSibling.focus();else{const e=this.parentElement.previousElementSibling;e&&e.querySelector("button.dropdown-toggle")?e.querySelector("button.dropdown-toggle").focus():e&&e.querySelector("a")&&e.querySelector("a").focus()}break;case 39:if(e.preventDefault(),this.nextElementSibling&&this.nextElementSibling.matches("button.dropdown-toggle"))this.nextElementSibling.focus();else{const e=this.parentElement.nextElementSibling;e&&e.querySelector("a").focus()}this.matches("ul.sub-menu .dropdown-toggle.toggled-on")&&this.parentElement.querySelector("ul.sub-menu li:first-child a").focus();break;case 40:if(e.preventDefault(),this.nextElementSibling){const e=this.nextElementSibling.querySelector("li:first-child a");e&&e.focus()}else{const e=this.parentElement.nextElementSibling;e&&e.querySelector("a").focus()}break;case 38:e.preventDefault();const s=this.parentElement.previousElementSibling;if(s)s.querySelector("a").focus();else{const e=this.closest("ul");e&&e.previousElementSibling.matches(".dropdown-toggle.toggled-on")&&e.previousElementSibling.focus()}}}))}))})),jQuery(document).ready((function(e){e("#primary-menu button.dropdown-toggle").on("click",(function(t){t.stopPropagation(),e(this).is("li")?(e(this).hasClass("opened")?e(this).addClass("closed"):e(this).removeClass("closed"),e(this).siblings().children(".sub-menu").removeClass("visible"),e(this).siblings().removeClass("current-menu-parent opened"),e(this).toggleClass("current-menu-parent opened"),e(this).children(".sub-menu").toggleClass("visible")):(e(this).parent().hasClass("opened")?e(this).parent().addClass("closed"):e(this).parent().removeClass("closed"),e(this).parent().siblings().children(".sub-menu").removeClass("visible"),e(this).parent().siblings().removeClass("current-menu-parent"),e(this).parent().children(".sub-menu").toggleClass("visible"),e(this).parent().toggleClass("current-menu-parent opened")),e("ul.has-sub-menu ul.sub-menu").hasClass("toggled-on")&&e(this).closest("ul.has-sub-menu").addClass("toggled-on")})),e("#section-menu li").attr("role","none"),e("#section-menu li a").attr("role","menuitem")}));
